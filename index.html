<html>
	<head>
		<title>Wine Labeler</title>
		<link rel="stylesheet" href="css/main.css">
		<script type="text/javascript" src="js/utilities.js"></script>
		<script type="text/javascript" src="lib/mustache.js"></script>
		<script type="text/javascript" src="lib/knockout.js"></script>
		<script type="text/javascript" src="lib/ko.mustache.js"></script>
		<script type="text/javascript" src="js/LabelGenerator.js"></script>

		<script>
			ko.setTemplateEngine(new ko.mustacheTemplateEngine());
		</script>

		<script id="entry-template" type="text/x-handlebars-template">
			<div class="wineLabel">
				<div class="header">
					<span data-bind="click: editName, visible: !nameEditable()">{{name}}</span>
					<input data-bind="value: name, visible: nameEditable, hasFocus: nameEditable" />
				</div>
				<div class="body">
					<div class="description">
						<span data-bind="click: editDescription, visible: !descriptionEditable()">{{description}}</span>
						<input data-bind="value: description, visible: descriptionEditable, hasFocus: descriptionEditable" />
					</div>
					<div class="other">
					</div>
				</div>
				<div class="footer">
					Drink by :
					<span data-bind="click: editDrinkByYear, visible: !drinkByYearEditable()">{{drinkByYear}}</span>
					<!--TODO: Write blog about order of visible and hasFocus-->
					<input data-bind="value: drinkByYear, visible: drinkByYearEditable, hasFocus: drinkByYearEditable" />
				</div>
			</div>
		</script>

	</head>

	<body>
		<div id="testbar"><a class="testbar" href="test/test.html" target="_blank">Run the Tests!</a></div>
		<button onclick="labelGenerator.addWineLabelDiv(document.getElementById('wineLabels'))">Add Wine Label</button>
		<div data-bind="template: { name: 'entry-template', foreach: labelGenerator.viewModel }"></div>
	</body>

	<script>
		var labelGenerator = new LabelGenerator;
		labelGenerator.init();
		labelGenerator.addWineLabelDiv(document.getElementById('wineLabels'));
	</script>


</html>